<!DOCTYPE html>
<html lang="no">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boinkytag - Multiplayer Game</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>

<body>
    <div id="menu-screen" class="screen active">
        <canvas id="menuCanvas"
            style="position: absolute; top:0; left:0; width:100%; height:100%; z-index: -1; pointer-events: none;"></canvas>
        <div class="menu-container">
            <h1>Boinkytag</h1>
            <p class="subtitle">Et lokalt multiplayer tatt-spill!</p>

            <div class="selection-group">
                <div class="selection-section player-select">
                    <label>Antall spillere:</label>
                    <div class="player-count-buttons">
                        <button class="player-count-btn" data-count="2">2</button>
                        <button class="player-count-btn" data-count="3">3</button>
                        <button class="player-count-btn" data-count="4">4</button>
                    </div>
                </div>

                <div class="selection-section level-select">
                    <h2>Velg verden:</h2>
                    <div class="level-buttons">
                        <button class="level-btn" data-level="0">Verden 1</button>
                        <button class="level-btn" data-level="1">Verden 2</button>
                        <button class="level-btn" data-level="2">Verden 3</button>
                        <button id="load-custom-level-btn" class="level-btn">Custom</button>
                    </div>
                </div>
            </div>

            <div class="controls-info">
                <h3>Slik spiller du:</h3>
                <div class="controls-grid">
                    <div class="control-item" id="controls-p1"><span class="char-icon" id="icon-p1">P1</span>
                        <div><kbd>W</kbd><kbd>A</kbd><kbd>D</kbd></div>
                    </div>
                    <div class="control-item" id="controls-p2"><span class="char-icon" id="icon-p2">P2</span>
                        <div><kbd>↑</kbd><kbd>←</kbd><kbd>→</kbd></div>
                    </div>
                    <div class="control-item" id="controls-p3"><span class="char-icon" id="icon-p3">P3</span>
                        <div><kbd>I</kbd><kbd>J</kbd><kbd>L</kbd></div>
                    </div>
                    <div class="control-item" id="controls-p4"><span class="char-icon" id="icon-p4">P4</span>
                        <div><kbd>T</kbd><kbd>F</kbd><kbd>H</kbd></div>
                    </div>
                </div>
            </div>

            <div class="menu-footer">
                <button id="start-btn" class="start-btn">Start Spill</button>
                <button id="tileset-viewer-btn" class="tileset-viewer-btn">Tileset Info</button>
                <button id="map-editor-btn" class="map-editor-btn">Map Editor</button>
            </div>
        </div>
    </div>

    <div id="editor-screen" class="screen">
        <div class="editor-toolbar">
            <button id="editor-back-btn" class="editor-btn">Meny</button>
            <div class="tool-group">
                <button class="tool-btn active" data-tool="platform">Platform</button>
                <button class="tool-btn" data-tool="bounce">Bounce</button>
                <button class="tool-btn" data-tool="teleport">Teleport</button>
                <button class="tool-btn" data-tool="boost">Boost</button>
                <button class="tool-btn" data-tool="spawn">Spawn</button>
            </div>
            <div class="tool-group">
                <button id="editor-zoom-out" class="editor-btn">-</button>
                <button id="editor-zoom-in" class="editor-btn">+</button>
                <button id="editor-save-btn" class="editor-btn">Save</button>
                <button id="editor-load-btn" class="editor-btn">Load</button>
                <button id="editor-test-btn" class="editor-btn"
                    style="background: var(--accent-color); color: #000;">Test</button>
                <button id="editor-clear-btn" class="editor-btn">Clear</button>
            </div>
            <div class="tool-group map-size-controls">
                <label>Bredde:</label>
                <input type="number" id="map-width-input" value="8000" step="100">
                <label>Høyde:</label>
                <input type="number" id="map-height-input" value="4800" step="100">
            </div>
            <div class="status-info">
                <span id="coord-info">0, 0</span>
                <span id="zoom-info">100%</span>
            </div>
        </div>
        <div class="editor-main">
            <canvas id="editorCanvas"></canvas>
            <div id="editor-props" class="editor-props">
                <canvas id="miniMapCanvas"></canvas>
                <h3>Egenskaper</h3>
                <div id="prop-controls">
                    <!-- Controls added via JS -->
                </div>
                <button id="delete-element-btn" class="delete-btn">Slett valgt</button>
            </div>
            <div class="editor-help">
                <p>Pan: Høyreklikk + Dra</p>
                <p>Zoom: Scroll / CTRL+Scroll / +/-</p>
                <p>Velg/Flytt: Klikk + Dra</p>
                <p>Opprett: Velg verktøy + Dra</p>
            </div>

        </div>
    </div>

    <div id="tileset-viewer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Tileset - Tilenumre</h2>
                <button id="close-tileset-viewer" class="close-btn">&times;</button>
            </div>
            <div id="tileset-viewer-content" class="tileset-viewer-content">
                <p>Laster tileset...</p>
            </div>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <canvas id="gameCanvas"></canvas>
        <div id="game-ui">
            <div>
                <div id="timer">01:00</div>
            </div>
            <div id="score-container" class="score-container"></div>
            <button id="menu-btn" class="menu-btn">Meny</button>
        </div>
    </div>

    <div id="level-loader-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Velg bane</h2>
                <button id="close-level-loader" class="close-btn">&times;</button>
            </div>
            <div id="level-list" class="level-list">
                <!-- Level list added via JS -->
            </div>
        </div>
    </div>

    <div id="save-level-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; height: auto;">
            <div class="modal-header">
                <h2>Lagre bane</h2>
                <button id="close-save-modal" class="close-btn">&times;</button>
            </div>
            <div style="padding: 30px; display: flex; flex-direction: column; gap: 20px;">
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <label style="color: #888; font-size: 0.8em;">Navn på banen:</label>
                    <input type="text" id="level-name-input"
                        style="padding: 10px; background: #111; border: 2px solid #444; color: white; font-family: 'Press Start 2P', cursive;">
                </div>
                <button id="confirm-save-btn" class="start-btn" style="width: 100%; font-size: 0.8em;">Lagre</button>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
    <script src="menu.js"></script>
    <script src="editor.js"></script>
</body>

</html>